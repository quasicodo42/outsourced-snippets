<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Detail View</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>

<div class="container mt-5">
    <h2 class="mb-4 text-center">Customer Detail View</h2>

    <div class="row">
        <div class="col-lg-6">
            <div class="card mb-4 shadow-sm">
                <div class="card-header bg-primary text-white">Basic Information</div>
                <div class="card-body">
                    <p><strong>Start Date:</strong> <span id="startDate">2023-01-01</span></p>
                    <p><strong>First Name:</strong> <span contenteditable="plaintext-only" class="border-bottom" id="firstName">John</span></p>
                    <p><strong>Last Name:</strong> <span contenteditable="plaintext-only" class="border-bottom" id="lastName">Doe</span></p>
                    <p><strong>DOB:</strong> <span contenteditable="plaintext-only" class="border-bottom" id="dob">1990-01-01</span></p>
                    <p><strong>Age:</strong> <span id="age">33</span></p>
                    <p><strong>Status:</strong>
                        <select class="form-select d-inline w-auto border-bottom" id="status">
                            <option selected id="activeStatus">Active</option>
                            <option id="inactiveStatus">Inactive</option>
                            <option id="pendingStatus">Pending</option>
                        </select>
                    </p>
                </div>
            </div>

            <div class="card mb-4 shadow-sm">
                <div class="card-header bg-primary text-white">Addresses</div>
                <div class="card-body">
                    <h5>Shipping Address</h5>
                    <p><strong>Address:</strong> <span contenteditable="plaintext-only" class="border-bottom" id="shippingAddress">123 Main St</span></p>
                    <p><strong>Suite:</strong> <span contenteditable="plaintext-only" class="border-bottom" id="shippingSuite">Apt 4B</span></p>
                    <p><strong>City:</strong> <span contenteditable="plaintext-only" class="border-bottom" id="shippingCity">New York</span></p>
                    <p><strong>State:</strong> <span contenteditable="plaintext-only" class="border-bottom" id="shippingState">NY</span></p>
                    <p><strong>Zip:</strong> <span contenteditable="plaintext-only" class="border-bottom" id="shippingZip">10001</span></p>

                    <h5>Billing Address</h5>
                    <p><strong>Address:</strong> <span contenteditable="plaintext-only" class="border-bottom" id="billingAddress">123 Main St</span></p>
                    <p><strong>Suite:</strong> <span contenteditable="plaintext-only" class="border-bottom" id="billingSuite">Apt 4B</span></p>
                    <p><strong>City:</strong> <span contenteditable="plaintext-only" class="border-bottom" id="billingCity">New York</span></p>
                    <p><strong>State:</strong> <span contenteditable="plaintext-only" class="border-bottom" id="billingState">NY</span></p>
                    <p><strong>Zip:</strong> <span contenteditable="plaintext-only" class="border-bottom" id="billingZip">10001</span></p>
                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="card mb-4 shadow-sm">
                <div class="card-header bg-primary text-white">Contact Information</div>
                <div class="card-body">
                    <p><strong>Phone:</strong> <span contenteditable="plaintext-only" class="border-bottom" id="phone">(555) 123-4567</span></p>
                    <p><strong>Email:</strong> <span contenteditable="plaintext-only" class="border-bottom" id="email">example@gmail.com</span></p>
                </div>
            </div>

            <div class="card mb-4 shadow-sm">
                <div class="card-header bg-primary text-white">Notes</div>
                <div class="card-body">
                    <h5>Call Notes</h5>
                    <div id="callNotesContainer">
                        <!-- Existing call notes (if any) -->
                        <div class="note-item d-flex justify-content-between align-items-center mb-2">
                            <div contenteditable="true" class="editable-field" id="callNote1">Call Note 1</div>
                            <button type="button" class="btn btn-sm btn-outline-danger delete-btn ms-2" onclick="deleteNote(this)">X</button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-sm btn-outline-primary mt-3" onclick="addCallNote()">Add Call Note</button>

                    <h5 class="mt-4">General Notes</h5>
                    <div id="generalNotesContainer">
                        <!-- Existing general notes (if any) -->
                        <div class="note-item d-flex justify-content-between align-items-center mb-2">
                            <div contenteditable="true" class="editable-field" id="generalNote1">General Note 1</div>
                            <button type="button" class="btn btn-sm btn-outline-danger delete-btn ms-2" onclick="deleteNote(this)">X</button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-sm btn-outline-primary mt-3" onclick="addGeneralNote()">Add General Note</button>
                </div>
            </div>

            <div class="card mb-4 shadow-sm">
                <div class="card-header bg-primary text-white">Clinic & Provider</div>
                <div class="card-body">
                    <p><strong>Clinic:</strong>
                        <select class="form-select d-inline w-auto border-bottom" id="clinic">
                            <option selected id="clinic1">Clinic 1</option>
                            <option id="clinic2">Clinic 2</option>
                            <option id="clinic3">Clinic 3</option>
                        </select>
                    </p>
                    <p><strong>Provider:</strong>
                        <select class="form-select d-inline w-auto border-bottom" id="provider">
                            <option selected id="provider1">Provider 1</option>
                            <option id="provider2">Provider 2</option>
                            <option id="provider3">Provider 3</option>
                        </select>
                    </p>
                </div>
            </div>

            <div class="card mb-4 shadow-sm">
                <div class="card-header bg-primary text-white">Additional Information</div>
                <div class="card-body">
                    <h5>Payment Info</h5>
                    <div id="paymentInfoContainer">
                        <!-- Existing payment info (if any) -->
                        <div class="payment-info-item mb-2">
                            <p>Payment information details 1...</p>
                        </div>
                    </div>
                    <button type="button" class="btn btn-sm btn-outline-primary mt-3" onclick="addPaymentInfo()">Add Payment Info</button>

                    <h5 class="mt-4">Marketing</h5>
                    <p contenteditable="plaintext-only" class="border-bottom" id="marketingInfo">Marketing information here...</p>
                </div>
            </div>
        </div>
    </div>

    <div class="d-flex justify-content-end mb-4">
        <!-- <button type="submit" class="btn btn-primary">Save</button> -->
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<script>
    // Function to update the data object with current values
    function updateDataObject() {
        const data = {
            basicInformation: {
                startDate: document.getElementById('startDate').innerText,
                firstName: document.getElementById('firstName').innerText,
                lastName: document.getElementById('lastName').innerText,
                dob: document.getElementById('dob').innerText,
                age: document.getElementById('age').innerText,
                status: document.getElementById('status').value
            },
            addresses: {
                shippingAddress: document.getElementById('shippingAddress').innerText,
                shippingSuite: document.getElementById('shippingSuite').innerText,
                shippingCity: document.getElementById('shippingCity').innerText,
                shippingState: document.getElementById('shippingState').innerText,
                shippingZip: document.getElementById('shippingZip').innerText,
                billingAddress: document.getElementById('billingAddress').innerText,
                billingSuite: document.getElementById('billingSuite').innerText,
                billingCity: document.getElementById('billingCity').innerText,
                billingState: document.getElementById('billingState').innerText,
                billingZip: document.getElementById('billingZip').innerText
            },
            contactInformation: {
                phone: document.getElementById('phone').innerText,
                email: document.getElementById('email').innerText
            },
            notes: {
                callNotes: [],
                generalNotes: []
            },
            clinicProvider: {
                clinic: document.getElementById('clinic').value,
                provider: document.getElementById('provider').value
            },
            additionalInformation: {
                marketingInfo: document.getElementById('marketingInfo').innerText,
                paymentInfo: []
            }
        };

        // Get call notes
        const callNotesContainer = document.getElementById('callNotesContainer');
        callNotesContainer.querySelectorAll('.editable-field').forEach((note, index) => {
            data.notes.callNotes.push(note.innerText);
        });

        // Get general notes
        const generalNotesContainer = document.getElementById('generalNotesContainer');
        generalNotesContainer.querySelectorAll('.editable-field').forEach((note, index) => {
            data.notes.generalNotes.push(note.innerText);
        });

        // Get payment info
        const paymentInfoContainer = document.getElementById('paymentInfoContainer');
        paymentInfoContainer.querySelectorAll('.payment-info-item').forEach((item, index) => {
            data.additionalInformation.paymentInfo.push(item.innerText);
        });

        console.log(data);
        // Here you can add a function to save this data to the backend or local storage
    }

    // Function to add a new call note
    function addCallNote() {
        const container = document.getElementById('callNotesContainer');
        const newNoteDiv = document.createElement('div');
        newNoteDiv.className = 'note-item d-flex justify-content-between align-items-center mb-2';
        newNoteDiv.innerHTML = `
            <div contenteditable="true" class="editable-field">New Call Note</div>
            <button type="button" class="btn btn-sm btn-outline-danger delete-btn ms-2" onclick="deleteNote(this)">X</button>
        `;
        container.appendChild(newNoteDiv);
        newNoteDiv.querySelector('.editable-field').addEventListener('input', updateDataObject);
    }

    // Function to add a new general note
    function addGeneralNote() {
        const container = document.getElementById('generalNotesContainer');
        const newNoteDiv = document.createElement('div');
        newNoteDiv.className = 'note-item d-flex justify-content-between align-items-center mb-2';
        newNoteDiv.innerHTML = `
            <div contenteditable="true" class="editable-field">New General Note</div>
            <button type="button" class="btn btn-sm btn-outline-danger delete-btn ms-2" onclick="deleteNote(this)">X</button>
        `;
        container.appendChild(newNoteDiv);
        newNoteDiv.querySelector('.editable-field').addEventListener('input', updateDataObject);
    }

    // Function to delete a note
    function deleteNote(button) {
        const noteDiv = button.parentElement;
        noteDiv.remove();
        updateDataObject();
    }

    // Function to add payment info
    function addPaymentInfo() {
        const container = document.getElementById('paymentInfoContainer');
        const newPaymentInfoDiv = document.createElement('div');
        newPaymentInfoDiv.className = 'payment-info-item mb-2';
        newPaymentInfoDiv.innerHTML = `
            <p>New Payment Information...</p>
        `;
        container.appendChild(newPaymentInfoDiv);
    }

    // Add event listeners to editable fields to update the data object on input change
    document.querySelectorAll('[contenteditable="plaintext-only"]').forEach(element => {
        element.addEventListener('input', updateDataObject);
    });

    // Add event listeners to select fields to update the data object on change
    document.querySelectorAll('select').forEach(element => {
        element.addEventListener('change', updateDataObject);
    });

    // Add event listeners to existing editable note fields
    document.querySelectorAll('.editable-field').forEach(element => {
        element.addEventListener('input', updateDataObject);
    });

</script>

</body>
</html>
